<!DOCTYPE html>
<head>
  <meta charset="utf-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, shrink-to-fit=no"
  />
  <meta name="description" content="" />
  <meta name="author" content="" />
  <title>BoliBazaar</title>
  <!-- Favicon-->
  <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
  <!-- Bootstrap Icons-->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css"
    rel="stylesheet"
  />
  <!-- Google fonts-->

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&family=Playfair+Display:ital,wght@0,400..900;1,400..900&display=swap"
    rel="stylesheet"
  />

  <!-- SimpleLightbox plugin CSS-->
  <link
    href="https://cdnjs.cloudflare.com/ajax/libs/SimpleLightbox/2.1.0/simpleLightbox.min.css"
    rel="stylesheet"
  />
  <!-- Core theme CSS (includes Bootstrap)-->
  <link href="css/styles.css" rel="stylesheet" />
</head>
  <body>
   <!-- Navigation-->
<nav
class="navbar navbar-expand-lg navbar-light fixed-top py-3 bg-dark"
id="mainNav"
>
<div class="container px-4 px-lg-5">
  <a class="navbar-brand" href="index.html">BoliBazaar</a>
  <button
    class="navbar-toggler navbar-toggler-right"
    type="button"
    data-bs-toggle="collapse"
    data-bs-target="#navbarResponsive"
    aria-controls="navbarResponsive"
    aria-expanded="false"
    aria-label="Toggle navigation"
  >
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarResponsive">
    <ul class="navbar-nav ms-auto my-2 my-lg-0">
      <li class="nav-item">
        <a class="nav-link" href="auctions.html">Auctions</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="add.html">Sell</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="login.html">Login</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="signup.html">Sign Up</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="profile.html">Profile</a>
      </li>
    </ul>
  </div>
</div>
</nav>
    <div class="container-md  mt-10 card py-5 " style="background-color: bisque;">
      <h2>Add New Auction Item</h2>
      <form>
          <div class="form-group">
              <label for="title">Title</label>
              <input type="text" class="form-control" id="title" name="title" required>
          </div>
          <div class="form-group">
              <label for="description">Description</label>
              <textarea class="form-control" id="description" name="description" rows="3" required></textarea>
          </div>
          <div class="form-group">
              <label for="startingBidAmount">Starting Bid Amount</label>
              <input type="number" class="form-control" id="startingBidAmount" name="startingBid[amount]" required>
          </div>
          <div class="form-group">
              <label for="startingBidCurrency">Starting Bid Currency</label>
              <input type="text" class="form-control" id="startingBidCurrency" name="startingBid[currency]" required>
          </div>
          <div class="form-group">
              <label for="category">Category</label>
              <input type="text" class="form-control" id="category" name="category" required>
          </div>
          <div class="form-group">
              <label for="condition">Condition</label>
              <input type="text" class="form-control" id="condition" name="condition" required>
          </div>
          <div class="form-group">
              <label for="images">Images</label>
              <input type="file" class="form-control-file" id="images" name="images" multiple required>
          </div>
          <div class="form-group">
              <label for="city">City</label>
              <input type="text" class="form-control" id="city" name="location[city]" required>
          </div>
          <div class="form-group">
              <label for="country">Country</label>
              <input type="text" class="form-control" id="country" name="location[country]" required>
          </div>
          <button type="submit" class="btn btn-primary">Submit</button>
      </form>
      <div class="alert alert-primary" role="alert" id="alert">
      </div>
        </div>


</div>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.4/gsap.min.js"
      integrity="sha512-EZI2cBcGPnmR89wTgVnN3602Yyi7muWo8y1B3a8WmIv1J9tYG+udH4LvmYjLiGp37yHB7FfaPBo8ly178m9g4Q=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.4/ScrollTrigger.min.js"
      integrity="sha512-OzC82YiH3UmMMs6Ydd9f2i7mS+UFL5f977iIoJ6oy07AJT+ePds9QOEtqXztSH29Nzua59fYS36knmMcv79GOg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script src="script.js"></script>
    <script>
      let form = document.querySelector("form");
      let alert = document.querySelector("#alert");
    
      form.addEventListener("submit", async (event) => {
        event.preventDefault();
    
        let title = document.querySelector("#title").value;
        let description = document.querySelector("#description").value;
        let startingBidAmount = document.querySelector("#startingBidAmount").value;
        let startingBidCurrency = document.querySelector("#startingBidCurrency").value;
        let category = document.querySelector("#category").value;
        let condition = document.querySelector("#condition").value;
        let images = document.querySelector("#images").files[0];
        let city = document.querySelector("#city").value;
        let country = document.querySelector("#country").value;    

        try {

          


          let headersList = {
 "auth-token": localStorage.getItem("authtoken"),
 "Content-Type": "application/json"
}

let bodyContent = JSON.stringify({
  "title": title,
  "description": description,
  "startingBid":{
    "amount":startingBidAmount,
    "currency":startingBidCurrency
  } ,
  "category": category,
  "condition": condition,
  "images": ["images.jpg"],
  "location":{"city": city,
  "country": country}
}
);

let response = await fetch("http://localhost:5000/api/auctionItems", { 
  method: "POST",
  body: bodyContent,
  headers: headersList
});

let data = await response.json();
console.log(data);



          if (response.ok) {
            let data = await response.json();
            console.log("Auction item saved:", data);
            alert.textContent = "Auction item saved successfully.";
            alert.classList.remove("alert-danger");
            alert.classList.add("alert-success");
          } else {
            alert.textContent = "Failed to save auction item.";
            alert.classList.remove("alert-success");
            alert.classList.add("alert-danger");
          }
        } catch (error) {
          console.error("Error saving auction item:", error);
          alert.textContent = "Internal Server Error. Please try again later.";
          alert.classList.remove("alert-success");
          alert.classList.add("alert-danger");
        }
      });
    </script>
    
  </body>
</html>
